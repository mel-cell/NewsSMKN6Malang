@page "/news/{Id:int}"
@using NewsSMKN6Malang.Data
@inject NewsService NewsService
@inject NavigationManager NavigationManager

@if (newsItem == null)
{
    <div class="flex items-center justify-center h-full">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
    </div>
}
else
{
    <div class="max-w-4xl mx-auto pb-12">
        <!-- Back Button -->
        <button @onclick="GoBack" class="flex items-center gap-2 text-gray-500 hover:text-primary transition-colors mb-6 group">
            <div class="w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center group-hover:border-primary group-hover:bg-blue-50 transition-all">
                 <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            </div>
            <span class="font-semibold text-sm">Kembali</span>
        </button>

        <!-- Article Header -->
        <header class="mb-8">
            <div class="flex items-center gap-3 mb-4">
                <span class="px-3 py-1 rounded-full bg-blue-100 text-primary text-xs font-bold uppercase tracking-wide">@newsItem.Category</span>
                <span class="text-gray-400 text-xs font-medium flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    @newsItem.PublishedDate.ToString("dd MMMM yyyy")
                </span>
            </div>
            
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-heading font-bold text-gray-900 leading-tight mb-6">
                @newsItem.Title
            </h1>

            <div class="flex items-center justify-between border-y border-gray-100 py-4">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-gray-200 overflow-hidden">
                        <img src="https://ui-avatars.com/api/?name=Admin+SMK&background=random" alt="Author" />
                    </div>
                    <div>
                        <p class="text-sm font-bold text-gray-800">Admin Sekolah</p>
                        <p class="text-xs text-gray-500">Tim Jurnalistik</p>
                    </div>
                </div>
                <div class="flex gap-2">
                     <button class="p-2 text-gray-400 hover:text-primary transition-colors hover:bg-blue-50 rounded-full"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg></button>
                     <button class="p-2 text-gray-400 hover:text-primary transition-colors hover:bg-blue-50 rounded-full"><svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg></button>
                </div>
            </div>
        </header>

        <!-- Featured Image -->
        <div class="rounded-2xl overflow-hidden shadow-lg mb-10 h-[300px] md:h-[450px]">
            <img src="@newsItem.ImageUrl" class="w-full h-full object-cover" alt="@newsItem.Title" />
        </div>

        <!-- Article Content -->
        <article class="prose prose-lg max-w-none prose-headings:font-heading prose-a:text-primary prose-img:rounded-xl text-gray-600 leading-relaxed">
            <!-- Simulating content since the model only has short description -->
            <p class="font-medium text-xl text-gray-800 mb-6">@newsItem.Description</p>
            
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            
            <h3>Latar Belakang</h3>
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p>
            
            <blockquote class="border-l-4 border-primary pl-4 italic bg-blue-50 py-2 pr-4 rounded-r my-6">
                "Pendidikan kejuruan adalah kunci untuk masa depan industri Indonesia. Siswa SMKN 6 Malang membuktikannya hari ini."
            </blockquote>
            
            <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.</p>
        </article>
        
        <!-- Related News (Manual Mockup) -->
        <div class="mt-16 border-t border-gray-200 pt-10">
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Berita Terkait</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex gap-4 group cursor-pointer border border-gray-100 p-3 rounded-xl hover:border-blue-100 hover:bg-blue-50/50 transition-all">
                    <div class="w-24 h-24 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0">
                        <img src="https://via.placeholder.com/150" class="w-full h-full object-cover" />
                    </div>
                    <div>
                        <span class="text-xs font-bold text-primary">PRESTASI</span>
                        <h4 class="font-bold text-gray-800 mt-1 mb-2 group-hover:text-primary transition-colors">Siswa Multimedia Menang Lomba Film Pendek</h4>
                        <span class="text-xs text-gray-500">2 hari yang lalu</span>
                    </div>
                </div>
                 <div class="flex gap-4 group cursor-pointer border border-gray-100 p-3 rounded-xl hover:border-blue-100 hover:bg-blue-50/50 transition-all">
                    <div class="w-24 h-24 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0">
                         <img src="https://via.placeholder.com/150" class="w-full h-full object-cover" />
                    </div>
                    <div>
                        <span class="text-xs font-bold text-primary">AGENDA</span>
                        <h4 class="font-bold text-gray-800 mt-1 mb-2 group-hover:text-primary transition-colors">Workshop Fotografi Bersama Canon Indonesia</h4>
                        <span class="text-xs text-gray-500">3 hari yang lalu</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
}

@code {
    [Parameter]
    public int Id { get; set; }

    private NewsItem newsItem;

    protected override async Task OnInitializedAsync()
    {
        newsItem = await NewsService.GetNewsByIdAsync(Id);
    }
    
    private void GoBack()
    {
        NavigationManager.NavigateTo("/");
    }
}
